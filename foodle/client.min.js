document.addEventListener("DOMContentLoaded",()=>{function t(){localStorage.setItem("alltime",A),localStorage.setItem("streak",E),A=localStorage.getItem("alltime"),E=localStorage.getItem("streak")}function e(){t(),w.style="visibility : hidden",k.style.display="none",document.getElementById("streak").innerHTML=E,document.getElementById("alltime").innerHTML=A;const e=Array.from(Array(26)).map((t,e)=>e+65),o=e.map(t=>String.fromCharCode(t).toLowerCase());o.forEach(t=>{document.getElementById(t).style="background-color: var(--key-bg); var(--key-text-color)"}),n(),y=[[]],g=1,f=0,p=!1,d()}function n(){b=words[Math.floor(Math.random()*words.length)]}function o(){const t=y.length;return y[t-1]}function i(){return y[5]}function a(t){const e=o();if(e&&e.length<5){e.push(t);const n=document.getElementById(String(g));n.setAttribute("data-animation","pop"),n.setAttribute("data-state","tbd"),g+=1,n.innerText=t,setTimeout(()=>{n.setAttribute("data-animation","idle")},100)}}function r(t,e){const n=t,o=e,i=[],a={};for(const t of n)a[t]||(a[t]=0),a[t]++;const r=n.length;for(let t=0;t<r;t++){const e=n[t],r=o[t];e===r&&(i[t]="correct",a[r]--)}for(let t=0;t<r;t++){n[t];const e=o[t];i[t]||(a[e]?(i[t]="present",a[e]--):i[t]="absent")}return i}function l(t,e,n){let o=n[e];return I.push({letter:t,color:o}),h.push({letter:t,index:e}),o}function s(t){let e=[],n=[];I.forEach(t=>{"present"===t.color?e.push(t.letter):"correct"===t.color&&n.push(t.letter)}),h.forEach(o=>{if(e.includes(o.letter)){const e=t+o.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-present); color: white;"}else if(n.includes(o.letter)){const e=t+o.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-correct); color: white;"}else{const e=t+o.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-absent); color: white;"}})}function c(){I=[];const t=o();t.length;const e=t.join("");let n=r(b,e);if(!words.includes(e)){const e=5*f+1;throw t.forEach((t,n)=>{setTimeout(()=>{const t=e+n,o=document.getElementById(t);o.setAttribute("data-animation","invalid"),setTimeout(function(){o.setAttribute("data-animation","idle")},600)})}),Error("Word is not in our dictionary.")}const i=5*f+1,a=200;if(6!=y.length)if(e===b)t.forEach((t,e)=>{setTimeout(()=>{const o=l(t,e,n),a=i+e,r=document.getElementById(a);r.textContent;"correct"==o&&r.setAttribute("data-state","correct"),r.setAttribute("data-animation","flip-in"),r.setAttribute("data-animation","flip-out"),setTimeout(()=>{r.setAttribute("data-animation","idle"),r.setAttribute("data-animation","win")},800)},a*e)});else{t.forEach((t,e)=>{setTimeout(()=>{const o=l(t,e,n),a=i+e,r=document.getElementById(a);r.textContent;"absent"==o&&r.setAttribute("data-state","absent"),"correct"==o&&r.setAttribute("data-state","correct"),"present"==o&&r.setAttribute("data-state","present"),"partial"==o&&r.setAttribute("data-state","present"),r.setAttribute("data-animation","flip-in"),r.setAttribute("data-animation","flip-out")},a*e)}),setTimeout(()=>{s(i)},1100)}if(f+=1,e===b&&(p=!0,E++,E>A&&(A=E,localStorage.setItem("alltime",A)),localStorage.setItem("streak",E),document.getElementById("streak").innerHTML=E,document.getElementById("alltime").innerHTML=A,setTimeout(()=>{w.style="visibility : visible",k.style.display="block"},3e3)),6===y.length){const o=26;E=0,reveal=b.split(""),e===b?(t.forEach((t,e)=>{setTimeout(()=>{const i=l(t,e,n),a=o+e,r=document.getElementById(a);r.textContent;"correct"==i&&r.setAttribute("data-state","correct"),r.setAttribute("data-animation","flip-in"),r.setAttribute("data-animation","flip-out"),setTimeout(()=>{r.setAttribute("data-animation","idle"),r.setAttribute("data-animation","win")},800)},a*e)}),p=!0,E++,E>A&&(A=E),document.getElementById("streak").innerHTML=E,document.getElementById("alltime").innerHTML=A,setTimeout(()=>{w.style="visibility : visible",k.style.display="block"},3e3)):(t.forEach((t,e)=>{setTimeout(()=>{const i=l(t,e,n),r=o+e,s=document.getElementById(r);s.textContent;"absent"==i&&s.setAttribute("data-state","absent"),"correct"==i&&s.setAttribute("data-state","correct"),"present"==i&&s.setAttribute("data-state","present"),s.setAttribute("data-animation","flip-in"),s.setAttribute("data-animation","flip-out"),setTimeout(()=>{s.setAttribute("data-animation","invalid")},1500),setTimeout(()=>{for(let t=0;t<5;t++)m();reveal.forEach((t,e)=>{setTimeout(()=>{const n=o+e,i=document.getElementById(n);i.setAttribute("data-animation","idle"),i.setAttribute("data-state","empty"),setTimeout(()=>{i.setAttribute("data-animation","flip-in"),i.innerText=t,i.setAttribute("data-state","correct"),i.setAttribute("data-animation","flip-out"),setTimeout(()=>{i.setAttribute("data-animation","idle"),i.setAttribute("data-animation","win")},800)},1e3)},a*e),p=!0})},3500)},a*e)}),setTimeout(()=>{w.style="visibility : visible",k.style.display="block"},7300))}y.push([])}function d(){const t=document.getElementById("board");t.innerHTML="";for(let e=0;e<30;e++){let n=document.createElement("div");n.classList.add("square"),n.setAttribute("id",e+1),n.setAttribute("data-animation","idle"),n.setAttribute("data-state","empty"),t.appendChild(n)}}function u(){const t=o();if(t.length>0){t.pop();y[y.length-1]=t;const e=document.getElementById(String(g-1));e.setAttribute("data-state","empty"),e.textContent="",g-=1}}function m(){const t=i();if(t.length>0){t.pop();y[y.length-1]=t;const e=document.getElementById(String(g-1));e.setAttribute("data-state","empty"),e.textContent="",g-=1}}let y,g,b,f,p,E=0,A=0,I=[],h=[];var k=document.getElementById("exampleModal"),B=document.getElementsByClassName("close")[0],v=document.getElementById("stats"),T=document.getElementById("twitter"),w=(document.getElementById("play-again"),document.getElementById("foot")),x=(k=document.getElementById("myModal"),document.getElementById("youtube")),C=document.getElementById("discord");document.getElementById("play-again").onclick=(({target:t})=>{e()}),window.onclick=function(t){t.target==k&&(k.style.display="none")},T.onclick=function(){window.open("https://twitter.com/rillotv","_blank")},x.onclick=function(){window.open("https://youtube.com/c/rillotv","_blank")},C.onclick=function(){window.open("https://discord.gg/WxkwX4v","_blank")},v.onclick=function(){k.style.display="block"},B.onclick=function(){k.style.display="none"},A=JSON.parse(localStorage.getItem("alltime"))||0,E=JSON.parse(localStorage.getItem("streak"))||0,e();const S=document.querySelectorAll(".keyboard-row button");document.addEventListener("keydown",t=>{if(!1===p){const e=t.key;if(t.keyCode>=65&&t.keyCode<=90&&a(e),"Enter"===e)return void c();if("Backspace"===e)return void u()}},!1);for(let t=0;t<S.length;t++)S[t].onclick=(({target:t})=>{const e=t.getAttribute("data-key");if(!1===p){if("enter"===e)return void c();if("del"===e)return void u();a(e)}})});