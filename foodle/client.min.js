document.addEventListener("DOMContentLoaded",()=>{function t(){localStorage.setItem("alltime",I),localStorage.setItem("streak",A),I=localStorage.getItem("alltime"),A=localStorage.getItem("streak")}function e(){t(),_.style="visibility : hidden",q.style="visibility : hidden",N.style.display="none",document.getElementById("streak").innerHTML=A,document.getElementById("alltime").innerHTML=I;const e=Array.from(Array(26)).map((t,e)=>e+65),o=e.map(t=>String.fromCharCode(t).toLowerCase());o.forEach(t=>{document.getElementById(t).style="background-color: var(--key-bg); var(--key-text-color)"}),n(),y=[[]],p=1,g=0,E=!1,d()}function n(){f=words[Math.floor(Math.random()*words.length)]}function o(){const t=y.length;return y[t-1]}function i(){return y[5]}function a(t){const e=o();if(e&&e.length<5){e.push(t);const n=document.getElementById(String(p));n.setAttribute("data-animation","pop"),n.setAttribute("data-state","tbd"),p+=1,n.innerText=t,setTimeout(()=>{n.setAttribute("data-animation","idle")},100)}}function s(t,e){const n=t,o=e,i=[],a={};for(const t of n)a[t]||(a[t]=0),a[t]++;const s=n.length;for(let t=0;t<s;t++){const e=n[t],s=o[t];e===s&&(i[t]="correct",a[s]--)}for(let t=0;t<s;t++){n[t];const e=o[t];i[t]||(a[e]?(i[t]="present",a[e]--):i[t]="absent")}return i}function r(t,e,n){let o=n[e];return h.push({letter:t,color:o}),B.push({letter:t,index:e}),o}function l(t){let e=[],n=[];h.forEach(t=>{"present"===t.color?e.push(t.letter):"correct"===t.color&&n.push(t.letter)}),B.forEach(o=>{if(e.includes(o.letter)){const e=t+o.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-present); color: white;"}else if(n.includes(o.letter)){const e=t+o.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-correct); color: white;"}else{const e=t+o.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-absent); color: white;"}})}function c(){h=[];const t=o();t.length;const e=t.join("");let n=s(f,e);if(!words.includes(e)){const e=5*g+1;throw t.forEach((t,n)=>{setTimeout(()=>{const t=e+n,o=document.getElementById(t);o.setAttribute("data-animation","invalid"),setTimeout(function(){o.setAttribute("data-animation","idle")},600)})}),Error("Word is not in our dictionary.")}const i=5*g+1,a=200;if(6!=y.length)if(e===f)t.forEach((t,e)=>{setTimeout(()=>{const o=r(t,e,n),a=i+e,s=document.getElementById(a);s.textContent;"correct"==o&&s.setAttribute("data-state","correct"),s.setAttribute("data-animation","flip-in"),s.setAttribute("data-animation","flip-out"),setTimeout(()=>{s.setAttribute("data-animation","idle"),s.setAttribute("data-animation","win")},800)},a*e)});else{t.forEach((t,e)=>{setTimeout(()=>{const o=r(t,e,n),a=i+e,s=document.getElementById(a);s.textContent;"absent"==o&&s.setAttribute("data-state","absent"),"correct"==o&&s.setAttribute("data-state","correct"),"present"==o&&s.setAttribute("data-state","present"),"partial"==o&&s.setAttribute("data-state","present"),s.setAttribute("data-animation","flip-in"),s.setAttribute("data-animation","flip-out")},a*e)}),setTimeout(()=>{l(i)},1100)}if(g+=1,e===f&&(E=!0,A++,A>I&&(I=A,localStorage.setItem("alltime",I)),localStorage.setItem("streak",A),document.getElementById("streak").innerHTML=A,document.getElementById("alltime").innerHTML=I,setTimeout(()=>{_.style="visibility : visible",q.style="visibility : visible",N.style.display="block"},3e3)),6===y.length){const o=26;A=0,reveal=f.split(""),e===f?(t.forEach((t,e)=>{setTimeout(()=>{const i=r(t,e,n),a=o+e,s=document.getElementById(a);s.textContent;"correct"==i&&s.setAttribute("data-state","correct"),s.setAttribute("data-animation","flip-in"),s.setAttribute("data-animation","flip-out"),setTimeout(()=>{s.setAttribute("data-animation","idle"),s.setAttribute("data-animation","win")},800)},a*e)}),E=!0,A++,A>I&&(I=A),document.getElementById("streak").innerHTML=A,document.getElementById("alltime").innerHTML=I,setTimeout(()=>{_.style="visibility : visible",N.style.display="block"},3e3)):(t.forEach((t,e)=>{setTimeout(()=>{const i=r(t,e,n),s=o+e,l=document.getElementById(s);l.textContent;"absent"==i&&l.setAttribute("data-state","absent"),"correct"==i&&l.setAttribute("data-state","correct"),"present"==i&&l.setAttribute("data-state","present"),l.setAttribute("data-animation","flip-in"),l.setAttribute("data-animation","flip-out"),setTimeout(()=>{l.setAttribute("data-animation","invalid")},1500),setTimeout(()=>{for(let t=0;t<5;t++)b();reveal.forEach((t,e)=>{setTimeout(()=>{const n=o+e,i=document.getElementById(n);i.setAttribute("data-animation","idle"),i.setAttribute("data-state","empty"),setTimeout(()=>{i.setAttribute("data-animation","flip-in"),i.innerText=t,i.setAttribute("data-state","correct"),i.setAttribute("data-animation","flip-out"),setTimeout(()=>{i.setAttribute("data-animation","idle"),i.setAttribute("data-animation","win")},800)},1e3)},a*e),E=!0})},3500)},a*e)}),setTimeout(()=>{_.style="visibility : visible",N.style.display="block"},7300))}y.push([])}function d(){const t=document.getElementById("board");t.innerHTML="";for(let e=0;e<30;e++){let n=document.createElement("div");n.classList.add("square"),n.setAttribute("id",e+1),n.setAttribute("data-animation","idle"),n.setAttribute("data-state","empty"),t.appendChild(n)}}function u(){const t=document.getElementById("correct-board");t.innerHTML="";for(let e=30;e<35;e++){let n=document.createElement("div");n.classList.add("square"),n.setAttribute("id",e+1),n.setAttribute("data-animation","idle"),n.setAttribute("data-state","empty"),t.appendChild(n)}const e=document.getElementById("contains-board");e.innerHTML="";for(let t=35;t<40;t++){let n=document.createElement("div");n.classList.add("square"),n.setAttribute("id",t+1),n.setAttribute("data-animation","idle"),n.setAttribute("data-state","empty"),e.appendChild(n)}const n=document.getElementById("absent-board");n.innerHTML="";for(let t=40;t<45;t++){let e=document.createElement("div");e.classList.add("square"),e.setAttribute("id",t+1),e.setAttribute("data-animation","idle"),e.setAttribute("data-state","empty"),n.appendChild(e)}let o=[["P",0,"correct"],["L",1,"absent"],["A",2,"absent"],["T",3,"absent"],["E",4,"absent"]];const i=200,a=31;o.forEach((t,e)=>{setTimeout(()=>{const n=a+e,o=document.getElementById(n);o.textContent=t[0],t[2],"correct"==t[2]&&o.setAttribute("data-state","correct"),"present"==t[2]&&o.setAttribute("data-state","present"),o.setAttribute("data-animation","flip-in"),o.setAttribute("data-animation","flip-out")},i*t[1])});let s=[["W",0,"absent"],["A",1,"absent"],["T",2,"absent"],["E",3,"absent"],["R",4,"present"]];const r=200,l=36;s.forEach((t,e)=>{setTimeout(()=>{const n=l+e,o=document.getElementById(n);o.textContent=t[0],t[2],"correct"==t[2]&&o.setAttribute("data-state","correct"),"present"==t[2]&&o.setAttribute("data-state","present"),o.setAttribute("data-animation","flip-in"),o.setAttribute("data-animation","flip-out")},r*t[1])});let c=[["B",0,"absent"],["A",1,"present"],["S",2,"present"],["I",3,"present"],["L",4,"present"]];const d=200,u=41;c.forEach((t,e)=>{setTimeout(()=>{const n=u+e,o=document.getElementById(n);o.textContent=t[0],"absent"==t[2]&&o.setAttribute("data-state","absent"),t[2],t[2],o.setAttribute("data-animation","flip-in"),o.setAttribute("data-animation","flip-out")},d*t[1])})}function m(){const t=o();if(t.length>0){t.pop();y[y.length-1]=t;const e=document.getElementById(String(p-1));e.setAttribute("data-state","empty"),e.textContent="",p-=1}}function b(){const t=i();if(t.length>0){t.pop();y[y.length-1]=t;const e=document.getElementById(String(p-1));e.setAttribute("data-state","empty"),e.textContent="",p-=1}}let y,p,f,g,E,A=0,I=0,h=[],B=[];var k=document.getElementById("help"),w=document.getElementById("helpModal"),T=document.getElementsByClassName("close")[0],v=document.getElementsByClassName("closeHelp")[0],C=document.getElementById("stats"),L=document.getElementById("twitter"),x=(document.getElementById("play-again"),document.getElementById("support-twitter")),S=document.getElementById("support-donate"),M=document.getElementById("support-twitter2"),H=document.getElementById("support-donate2"),_=document.getElementById("foot"),q=document.getElementById("bar"),N=document.getElementById("myModal"),O=document.getElementById("youtube");document.getElementById("play-again").onclick=(({target:t})=>{e()}),window.onclick=function(t){t.target==N&&(N.style.display="none")},L.onclick=function(){window.open("https://twitter.com/intent/user?screen_name=rillotv","_blank")},O.onclick=function(){window.open("https://youtube.com/c/rillotv","_blank")},S.onclick=function(){window.open("https://www.buymeacoffee.com/rillo","_blank")},x.onclick=function(){window.open("https://twitter.com/intent/user?screen_name=rillotv","_blank")},H.onclick=function(){window.open("https://www.buymeacoffee.com/rillo","_blank")},M.onclick=function(){window.open("https://twitter.com/intent/user?screen_name=rillotv","_blank")},C.onclick=function(){N.style.display="block"},k.onclick=function(){w.style.display="block",u()},T.onclick=function(){N.style.display="none"},v.onclick=function(){w.style.display="none"},I=JSON.parse(localStorage.getItem("alltime"))||0,A=JSON.parse(localStorage.getItem("streak"))||0,e();const J=document.querySelectorAll(".keyboard-row button");document.addEventListener("keydown",t=>{if(!1===E){const e=t.key;if(t.keyCode>=65&&t.keyCode<=90&&a(e),"Enter"===e)return void c();if("Backspace"===e)return void m()}},!1);for(let t=0;t<J.length;t++)J[t].onclick=(({target:t})=>{const e=t.getAttribute("data-key");if(!1===E){if("enter"===e)return void c();if("del"===e)return void m();a(e)}})});