document.addEventListener("DOMContentLoaded",()=>{function t(){localStorage.setItem("alltime",I),localStorage.setItem("streak",E),I=localStorage.getItem("alltime"),E=localStorage.getItem("streak")}function e(){t(),x.style="visibility : hidden",w.style.display="none",document.getElementById("streak").innerHTML=E,document.getElementById("alltime").innerHTML=I;const e=Array.from(Array(26)).map((t,e)=>e+65),a=e.map(t=>String.fromCharCode(t).toLowerCase());a.forEach(t=>{document.getElementById(t).style="background-color: var(--key-bg); var(--key-text-color)"}),n(),y=[[]],p=1,f=0,A=!1,c()}function n(){g=words[Math.floor(Math.random()*words.length)]}function a(){const t=y.length;return y[t-1]}function i(){return y[5]}function o(t){const e=a();if(e&&e.length<5){e.push(t);const n=document.getElementById(String(p));n.setAttribute("data-animation","pop"),n.setAttribute("data-state","tbd"),p+=1,n.innerText=t,setTimeout(()=>{n.setAttribute("data-animation","idle")},100)}}function s(t,e){const n=t,a=e,i=[],o={};for(const t of n)o[t]||(o[t]=0),o[t]++;const s=n.length;for(let t=0;t<s;t++){const e=n[t],s=a[t];e===s&&(i[t]="correct",o[s]--)}for(let t=0;t<s;t++){n[t];const e=a[t];i[t]||(o[e]?(i[t]="present",o[e]--):i[t]="absent")}return i}function r(t,e,n){let a=n[e];return h.push({letter:t,color:a}),B.push({letter:t,index:e}),a}function l(t){let e=[],n=[];h.forEach(t=>{"present"===t.color?e.push(t.letter):"correct"===t.color&&n.push(t.letter)}),B.forEach(a=>{if(e.includes(a.letter)){const e=t+a.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-present); color: white;"}else if(n.includes(a.letter)){const e=t+a.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-correct); color: white;"}else{const e=t+a.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-absent); color: white;"}})}function d(){h=[];const t=a();t.length;const e=t.join("");let n=s(g,e);if(!words.includes(e)){const e=5*f+1;throw t.forEach((t,n)=>{setTimeout(()=>{const t=e+n,a=document.getElementById(t);a.setAttribute("data-animation","invalid"),setTimeout(function(){a.setAttribute("data-animation","idle")},600)})}),Error("Word is not in our dictionary.")}const i=5*f+1,o=200;if(6!=y.length)if(e===g)t.forEach((t,e)=>{setTimeout(()=>{const a=r(t,e,n),o=i+e,s=document.getElementById(o);s.textContent;"correct"==a&&s.setAttribute("data-state","correct"),s.setAttribute("data-animation","flip-in"),s.setAttribute("data-animation","flip-out"),setTimeout(()=>{s.setAttribute("data-animation","idle"),s.setAttribute("data-animation","win")},800)},o*e)});else{t.forEach((t,e)=>{setTimeout(()=>{const a=r(t,e,n),o=i+e,s=document.getElementById(o);s.textContent;"absent"==a&&s.setAttribute("data-state","absent"),"correct"==a&&s.setAttribute("data-state","correct"),"present"==a&&s.setAttribute("data-state","present"),"partial"==a&&s.setAttribute("data-state","present"),s.setAttribute("data-animation","flip-in"),s.setAttribute("data-animation","flip-out")},o*e)}),setTimeout(()=>{l(i)},1100)}if(f+=1,e===g&&(A=!0,E++,E>I&&(I=E,localStorage.setItem("alltime",I)),localStorage.setItem("streak",E),document.getElementById("streak").innerHTML=E,document.getElementById("alltime").innerHTML=I,setTimeout(()=>{x.style="visibility : visible",S.style="visibility : visible",w.style.display="block"},3e3)),6===y.length){const a=26;E=0,reveal=g.split(""),e===g?(t.forEach((t,e)=>{setTimeout(()=>{const i=r(t,e,n),o=a+e,s=document.getElementById(o);s.textContent;"correct"==i&&s.setAttribute("data-state","correct"),s.setAttribute("data-animation","flip-in"),s.setAttribute("data-animation","flip-out"),setTimeout(()=>{s.setAttribute("data-animation","idle"),s.setAttribute("data-animation","win")},800)},o*e)}),A=!0,E++,E>I&&(I=E),document.getElementById("streak").innerHTML=E,document.getElementById("alltime").innerHTML=I,setTimeout(()=>{x.style="visibility : visible",w.style.display="block"},3e3)):(t.forEach((t,e)=>{setTimeout(()=>{const i=r(t,e,n),s=a+e,l=document.getElementById(s);l.textContent;"absent"==i&&l.setAttribute("data-state","absent"),"correct"==i&&l.setAttribute("data-state","correct"),"present"==i&&l.setAttribute("data-state","present"),l.setAttribute("data-animation","flip-in"),l.setAttribute("data-animation","flip-out"),setTimeout(()=>{l.setAttribute("data-animation","invalid")},1500),setTimeout(()=>{for(let t=0;t<5;t++)b();reveal.forEach((t,e)=>{setTimeout(()=>{const n=a+e,i=document.getElementById(n);i.setAttribute("data-animation","idle"),i.setAttribute("data-state","empty"),setTimeout(()=>{i.setAttribute("data-animation","flip-in"),i.innerText=t,i.setAttribute("data-state","correct"),i.setAttribute("data-animation","flip-out"),setTimeout(()=>{i.setAttribute("data-animation","idle"),i.setAttribute("data-animation","win")},800)},1e3)},o*e),A=!0})},3500)},o*e)}),setTimeout(()=>{x.style="visibility : visible",w.style.display="block"},7300))}y.push([])}function c(){const t=document.getElementById("board");t.innerHTML="";for(let e=0;e<30;e++){let n=document.createElement("div");n.classList.add("square"),n.setAttribute("id",e+1),n.setAttribute("data-animation","idle"),n.setAttribute("data-state","empty"),t.appendChild(n)}}function u(){const t=document.getElementById("correct-board");t.innerHTML="";for(let e=30;e<35;e++){let n=document.createElement("div");n.classList.add("square"),n.setAttribute("id",e+1),n.setAttribute("data-animation","idle"),n.setAttribute("data-state","empty"),t.appendChild(n)}const e=document.getElementById("contains-board");e.innerHTML="";for(let t=35;t<40;t++){let n=document.createElement("div");n.classList.add("square"),n.setAttribute("id",t+1),n.setAttribute("data-animation","idle"),n.setAttribute("data-state","empty"),e.appendChild(n)}const n=document.getElementById("absent-board");n.innerHTML="";for(let t=40;t<45;t++){let e=document.createElement("div");e.classList.add("square"),e.setAttribute("id",t+1),e.setAttribute("data-animation","idle"),e.setAttribute("data-state","empty"),n.appendChild(e)}let a=[["P",0,"correct"],["L",1,"absent"],["A",2,"absent"],["T",3,"absent"],["E",4,"absent"]];const i=200,o=31;a.forEach((t,e)=>{setTimeout(()=>{const n=o+e,a=document.getElementById(n);a.textContent=t[0],t[2],"correct"==t[2]&&a.setAttribute("data-state","correct"),"present"==t[2]&&a.setAttribute("data-state","present"),a.setAttribute("data-animation","flip-in"),a.setAttribute("data-animation","flip-out")},i*t[1])});let s=[["W",0,"absent"],["A",1,"absent"],["T",2,"absent"],["E",3,"absent"],["R",4,"present"]];const r=200,l=36;s.forEach((t,e)=>{setTimeout(()=>{const n=l+e,a=document.getElementById(n);a.textContent=t[0],t[2],"correct"==t[2]&&a.setAttribute("data-state","correct"),"present"==t[2]&&a.setAttribute("data-state","present"),a.setAttribute("data-animation","flip-in"),a.setAttribute("data-animation","flip-out")},r*t[1])});let d=[["B",0,"absent"],["A",1,"present"],["S",2,"present"],["I",3,"present"],["L",4,"present"]];const c=200,u=41;d.forEach((t,e)=>{setTimeout(()=>{const n=u+e,a=document.getElementById(n);a.textContent=t[0],"absent"==t[2]&&a.setAttribute("data-state","absent"),t[2],t[2],a.setAttribute("data-animation","flip-in"),a.setAttribute("data-animation","flip-out")},c*t[1])})}function m(){const t=a();if(t.length>0){t.pop();y[y.length-1]=t;const e=document.getElementById(String(p-1));e.setAttribute("data-state","empty"),e.textContent="",p-=1}}function b(){const t=i();if(t.length>0){t.pop();y[y.length-1]=t;const e=document.getElementById(String(p-1));e.setAttribute("data-state","empty"),e.textContent="",p-=1}}let y,p,g,f,A,E=0,I=0,h=[],B=[];var T=document.getElementById("help"),k=document.getElementById("helpModal"),v=document.getElementsByClassName("close")[0],C=document.getElementsByClassName("closeHelp")[0],L=document.getElementById("stats"),x=(document.getElementById("play-again"),document.getElementById("foot")),S=document.getElementById("bar"),w=document.getElementById("myModal");document.getElementById("youtube");document.getElementById("play-again").onclick=(({target:t})=>{e()}),window.onclick=function(t){t.target==w&&(w.style.display="none")},L.onclick=function(){w.style.display="block"},T.onclick=function(){k.style.display="block",u()},v.onclick=function(){w.style.display="none"},C.onclick=function(){k.style.display="none"},I=JSON.parse(localStorage.getItem("alltime"))||0,E=JSON.parse(localStorage.getItem("streak"))||0,e();const M=document.querySelectorAll(".keyboard-row button");document.addEventListener("keydown",t=>{if(!1===A){const e=t.key;if(t.keyCode>=65&&t.keyCode<=90&&o(e),"Enter"===e)return void d();if("Backspace"===e)return void m()}},!1);for(let t=0;t<M.length;t++)M[t].onclick=(({target:t})=>{const e=t.getAttribute("data-key");if(!1===A){if("enter"===e)return void d();if("del"===e)return void m();o(e)}})});