document.addEventListener("DOMContentLoaded",()=>{function t(){localStorage.setItem("alltime",I),localStorage.setItem("streak",h),I=localStorage.getItem("alltime"),h=localStorage.getItem("streak")}function e(){t(),C.style="visibility : hidden",v.style.display="none",document.getElementById("streak").innerHTML=h,document.getElementById("alltime").innerHTML=I;const e=Array.from(Array(26)).map((t,e)=>e+65),n=e.map(t=>String.fromCharCode(t).toLowerCase());n.forEach(t=>{document.getElementById(t).style="background-color: var(--key-bg); var(--key-text-color)"}),y(),b=[[]],g=1,p=0,E=!1,d()}function n(){f=A[Math.floor(Math.random()*A.length)]}function o(){const t=b.length;return b[t-1]}function i(){return b[5]}function a(t){const e=o();if(e&&e.length<5){e.push(t);const n=document.getElementById(String(g));n.setAttribute("data-animation","pop"),n.setAttribute("data-state","tbd"),g+=1,n.innerText=t,setTimeout(()=>{n.setAttribute("data-animation","idle")},100)}}function r(t,e){const n=t,o=e,i=[],a={};for(const t of n)a[t]||(a[t]=0),a[t]++;const r=n.length;for(let t=0;t<r;t++){const e=n[t],r=o[t];e===r&&(i[t]="correct",a[r]--)}for(let t=0;t<r;t++){n[t];const e=o[t];i[t]||(a[e]?(i[t]="present",a[e]--):i[t]="absent")}return i}function l(t,e,n){let o=n[e];return k.push({letter:t,color:o}),B.push({letter:t,index:e}),o}function s(t){let e=[],n=[];k.forEach(t=>{"present"===t.color?e.push(t.letter):"correct"===t.color&&n.push(t.letter)}),B.forEach(o=>{if(e.includes(o.letter)){const e=t+o.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-present); color: white;"}else if(n.includes(o.letter)){const e=t+o.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-correct); color: white;"}else{const e=t+o.index,n=document.getElementById(e),i=n.textContent;document.getElementById(i).style="background-color: var(--color-absent); color: white;"}})}function c(){k=[];const t=o();t.length;const e=t.join("");let n=r(f,e);if(!A.includes(e)){const e=5*p+1;throw t.forEach((t,n)=>{setTimeout(()=>{const t=e+n,o=document.getElementById(t);o.setAttribute("data-animation","invalid"),setTimeout(function(){o.setAttribute("data-animation","idle")},600)})}),Error("Word is not in our dictionary.")}const i=5*p+1,a=200;if(6!=b.length)if(e===f)t.forEach((t,e)=>{setTimeout(()=>{const o=l(t,e,n),a=i+e,r=document.getElementById(a);r.textContent;"correct"==o&&r.setAttribute("data-state","correct"),r.setAttribute("data-animation","flip-in"),r.setAttribute("data-animation","flip-out"),setTimeout(()=>{r.setAttribute("data-animation","idle"),r.setAttribute("data-animation","win")},800)},a*e)});else{t.forEach((t,e)=>{setTimeout(()=>{const o=l(t,e,n),a=i+e,r=document.getElementById(a);r.textContent;"absent"==o&&r.setAttribute("data-state","absent"),"correct"==o&&r.setAttribute("data-state","correct"),"present"==o&&r.setAttribute("data-state","present"),"partial"==o&&r.setAttribute("data-state","present"),r.setAttribute("data-animation","flip-in"),r.setAttribute("data-animation","flip-out")},a*e)}),setTimeout(()=>{s(i)},1100)}if(p+=1,e===f&&(E=!0,h++,h>I&&(I=h),document.getElementById("streak").innerHTML=h,document.getElementById("alltime").innerHTML=I,setTimeout(()=>{C.style="visibility : visible",v.style.display="block"},3e3)),6===b.length){const o=26;h=0,reveal=f.split(""),e===f?(t.forEach((t,e)=>{setTimeout(()=>{const i=l(t,e,n),a=o+e,r=document.getElementById(a);r.textContent;"correct"==i&&r.setAttribute("data-state","correct"),r.setAttribute("data-animation","flip-in"),r.setAttribute("data-animation","flip-out"),setTimeout(()=>{r.setAttribute("data-animation","idle"),r.setAttribute("data-animation","win")},800)},a*e)}),E=!0,h++,h>I&&(I=h),document.getElementById("streak").innerHTML=h,document.getElementById("alltime").innerHTML=I,setTimeout(()=>{C.style="visibility : visible",v.style.display="block"},3e3)):(t.forEach((t,e)=>{setTimeout(()=>{const i=l(t,e,n),r=o+e,s=document.getElementById(r);s.textContent;"absent"==i&&s.setAttribute("data-state","absent"),"correct"==i&&s.setAttribute("data-state","correct"),"present"==i&&s.setAttribute("data-state","present"),s.setAttribute("data-animation","flip-in"),s.setAttribute("data-animation","flip-out"),setTimeout(()=>{s.setAttribute("data-animation","invalid")},1500),setTimeout(()=>{for(let t=0;t<5;t++)m();reveal.forEach((t,e)=>{setTimeout(()=>{const n=o+e,i=document.getElementById(n);i.setAttribute("data-animation","idle"),i.setAttribute("data-state","empty"),setTimeout(()=>{i.setAttribute("data-animation","flip-in"),i.innerText=t,i.setAttribute("data-state","correct"),i.setAttribute("data-animation","flip-out"),setTimeout(()=>{i.setAttribute("data-animation","idle"),i.setAttribute("data-animation","win")},800)},1e3)},a*e),E=!0})},3500)},a*e)}),setTimeout(()=>{C.style="visibility : visible",v.style.display="block"},7300))}b.push([])}function d(){const t=document.getElementById("board");t.innerHTML="";for(let e=0;e<30;e++){let n=document.createElement("div");n.classList.add("square"),n.setAttribute("id",e+1),n.setAttribute("data-animation","idle"),n.setAttribute("data-state","empty"),t.appendChild(n)}}function u(){const t=o();if(t.length>0){t.pop();b[b.length-1]=t;const e=document.getElementById(String(g-1));e.setAttribute("data-state","empty"),e.textContent="",g-=1}}function m(){const t=i();if(t.length>0){t.pop();b[b.length-1]=t;const e=document.getElementById(String(g-1));e.setAttribute("data-state","empty"),e.textContent="",g-=1}}function y(){fetch("food.txt").then(t=>t.text()).then(t=>{A=t.split(","),A=A.map(t=>t.toLowerCase()),n()})}let b,g,f,p,E,A=[],h=0,I=0,k=[],B=[];var v=document.getElementById("exampleModal"),T=document.getElementsByClassName("close")[0],w=document.getElementById("stats"),x=document.getElementById("twitter"),C=(document.getElementById("play-again"),document.getElementById("foot")),L=(v=document.getElementById("myModal"),document.getElementById("youtube")),M=document.getElementById("discord");document.getElementById("play-again").onclick=(({target:t})=>{e()}),window.onclick=function(t){t.target==v&&(v.style.display="none")},x.onclick=function(){window.open("https://twitter.com/rillotv","_blank")},L.onclick=function(){window.open("https://youtube.com/c/rillotv","_blank")},M.onclick=function(){window.open("https://discord.gg/WxkwX4v","_blank")},w.onclick=function(){v.style.display="block"},T.onclick=function(){v.style.display="none"},I=JSON.parse(localStorage.getItem("alltime"))||0,e();const S=document.querySelectorAll(".keyboard-row button");document.addEventListener("keydown",t=>{if(!1===E){const e=t.key;if(t.keyCode>=65&&t.keyCode<=90&&a(e),"Enter"===e)return void c();if("Backspace"===e)return void u()}},!1);for(let t=0;t<S.length;t++)S[t].onclick=(({target:t})=>{const e=t.getAttribute("data-key");if(!1===E){if("enter"===e)return void c();if("del"===e)return void u();a(e)}})});